# 后端 Node.js 服务
FROM node:20

WORKDIR /app

# 拷贝 package.json 并安装依赖
COPY backend/package*.json ./
RUN npm install

# 拷贝项目代码
COPY backend/ ./

# 暴露端口（假设你 app.js 监听 3000）
EXPOSE 3000

# 复制 start.sh 并赋执行权限
COPY backend/start.sh ./start.sh
RUN chmod +x ./start.sh

# 启动脚本
CMD ["./start.sh"]